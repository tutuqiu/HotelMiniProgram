<!--pages/room_detail/room_detail.wxml-->
<!-- <text>pages/room_detail/room_detail.wxml</text> -->
<!-- pages/room_detail/room_detail.wxml -->
<view class="detail-container">
  <!-- 顶部多图滑动区域（替换原封面图） -->
  <view class="swiper-wrap">
    <swiper 
      class="room-swiper" 
      indicator-dots="{{true}}" 
      indicator-color="#fff" 
      indicator-active-color="#ff7a45"
      autoplay="{{false}}"
      circular="{{true}}"
    >
      <!-- 循环渲染所有图片 -->
      <swiper-item wx:for="{{roomDetail.images}}" wx:key="index">
        <image 
          class="swiper-img" 
          src="{{imgPrefix+item}}" 
          mode="widthFix"
          bindtap="previewImage"  
        ></image>
      </swiper-item>
    </swiper>

    <!-- 收藏按钮（悬浮在swiper上） -->
    <view class="collect-btn" catchtap="onCollectTap">
      <image 
        src="{{isCollected ? 'http://cdn.xtuctuy.top/images/collected.png' : 'http://cdn.xtuctuy.top/images/uncollected.png'}}" 
        mode="widthFix"
      ></image>
    </view>
  </view>

  <!-- 评分 + 标题区域（不变） -->
  <view class="title-wrap">
    <!-- <view class="score-tag">4.9 好评如潮</view> -->
    <view class="room-title">{{roomDetail.name}}</view>
    <view class="tags-wrap">
      <view class="tag-item" wx:for="{{roomDetail.tags}}" wx:key="index">{{item}}</view>
    </view>
  </view>

  <!-- 地址区域 -->
  <view class="address-wrap">
    <text class="address-text">{{roomDetail.address}}</text> <!-- 渲染address字段 -->
    <view class="distance-wrap">
      <icon type="location" size="14" color="#999"></icon>
      <!-- <text class="distance-text">距您直线{{roomDetail.distance}}公里</text> -->
    </view>
    <!-- <button class="map-btn">地图</button> -->
  </view>
  <view class="description-container">
    <text>房源介绍</text>
    <text>{{roomDetail.description}}</text>
    <!-- TODO:卧室配套床 -->
  </view>


  <!-- 房型信息区域（不变） -->
  <!-- <view class="room-type-wrap">
    <image class="type-img" src="{{roomDetail.images[0]}}" mode="widthFix"></image>
    <view class="type-info">
      <view class="type-title">整套出租·{{roomDetail.bed}}张床房</view>
      <view class="type-desc">
        整套{{roomDetail.area}}㎡·{{roomDetail.bedroom}}室{{roomDetail.livingdining}}厅·{{roomDetail.bed}}床·可住{{roomDetail.capacity}}人
      </view>
      <view class="cancel-tip">12月15日14点前可免费取消</view>
    </view>
  </view> -->

  <!-- 底部预订栏 -->
  <view class="bottom-bar">
    <view class="contact-container" bindtap="onContact">
      <image src="http://cdn.xtuctuy.top/images/chat-prebook.png"></image>
      <text>联系客服</text>
    </view>
    <view class="stay-date" bindtap="onShowModal">
      <text>住 {{checkInDate}}</text>
      <text>离 {{checkOutDate}}</text>
      
      <date-selector 
        wx:if="{{showDateSelector}}" 
        defaultCheckInDate="{{checkInDate}}" 
        defaultCheckOutDate="{{checkOutDate}}" 
        needPrice="{{true}}" 
        bind:confirm="confirmDate" 
        bind:hide="onHideModal"></date-selector>
    </view>
    <button class="book-btn-large" bindtap="onBook" disabled="{{!canReserve}}">
      立即预订
      <text class="total-price">{{dayCount}}晚共¥{{roomDetail.totalPrice}}</text>
    </button>
  </view>
</view>